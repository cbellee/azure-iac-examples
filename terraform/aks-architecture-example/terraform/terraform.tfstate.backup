{
  "version": 4,
  "terraform_version": "1.9.3",
  "serial": 36,
  "lineage": "d677d7c3-a5ab-7a66-33df-62b1a0720f2e",
  "outputs": {
    "nonprod-aks-node-rg": {
      "value": "test-nonprod-aks-node-rg",
      "type": "string"
    },
    "nonprod-cluster-name": {
      "value": "test-nonprod-cluster",
      "type": "string"
    },
    "prod-aks-node-rg": {
      "value": "test-prod-aks-node-rg",
      "type": "string"
    },
    "prod-cluster-name": {
      "value": "test-prod-cluster",
      "type": "string"
    }
  },
  "resources": [
    {
      "mode": "data",
      "type": "local_file",
      "name": "cloudinit",
      "provider": "provider[\"registry.terraform.io/hashicorp/local\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "content": "#cloud-config\npackage_upgrade: true\nruncmd:\n  - 'curl -LO https://storage.googleapis.com/kubernetes-release/release/`curl -s https://storage.googleapis.com/kubernetes-release/release/stable.txt`/bin/linux/amd64/kubectl'\n  - 'chmod +x ./kubectl'\n  - 'mv ./kubectl /usr/local/bin/kubectl'\n  - 'curl -sL https://aka.ms/InstallAzureCLIDeb | sudo bash'\n",
            "content_base64": "I2Nsb3VkLWNvbmZpZwpwYWNrYWdlX3VwZ3JhZGU6IHRydWUKcnVuY21kOgogIC0gJ2N1cmwgLUxPIGh0dHBzOi8vc3RvcmFnZS5nb29nbGVhcGlzLmNvbS9rdWJlcm5ldGVzLXJlbGVhc2UvcmVsZWFzZS9gY3VybCAtcyBodHRwczovL3N0b3JhZ2UuZ29vZ2xlYXBpcy5jb20va3ViZXJuZXRlcy1yZWxlYXNlL3JlbGVhc2Uvc3RhYmxlLnR4dGAvYmluL2xpbnV4L2FtZDY0L2t1YmVjdGwnCiAgLSAnY2htb2QgK3ggLi9rdWJlY3RsJwogIC0gJ212IC4va3ViZWN0bCAvdXNyL2xvY2FsL2Jpbi9rdWJlY3RsJwogIC0gJ2N1cmwgLXNMIGh0dHBzOi8vYWthLm1zL0luc3RhbGxBenVyZUNMSURlYiB8IHN1ZG8gYmFzaCcK",
            "content_base64sha256": "D9+we904M68wtmFpAseCYuHkrgUOtB7B/WBa2vG+1FA=",
            "content_base64sha512": "hRsHYBjuk6BBuezsS+bMlII0CcKnc6p2MGHkLdCOfYy6v4HOpNFJDSApfIB1Ksj19SCNKHCfq7vObH0mTgAWZg==",
            "content_md5": "b8958e69c633ce6c8a0e48973ac3d6f6",
            "content_sha1": "2278cc5fd453530ee3b218d9e04736010e36fd2a",
            "content_sha256": "0fdfb07bdd3833af30b6616902c78262e1e4ae050eb41ec1fd605adaf1bed450",
            "content_sha512": "851b076018ee93a041b9ecec4be6cc94823409c2a773aa763061e42dd08e7d8cbabf81cea4d1490d20297c80752ac8f5f5208d28709fabbbce6c7d264e001666",
            "filename": "./cloudinit.txt",
            "id": "2278cc5fd453530ee3b218d9e04736010e36fd2a"
          },
          "sensitive_attributes": []
        }
      ]
    },
    {
      "mode": "managed",
      "type": "azurerm_application_gateway",
      "name": "app_gateway",
      "provider": "provider[\"registry.terraform.io/hashicorp/azurerm\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "authentication_certificate": [],
            "autoscale_configuration": [],
            "backend_address_pool": [
              {
                "fqdns": [],
                "id": "/subscriptions/b2375b5f-8dab-4436-b87c-32bc7fdce5d0/resourceGroups/test-network-rg/providers/Microsoft.Network/applicationGateways/test-appgwy/backendAddressPools/backend-pool",
                "ip_addresses": [],
                "name": "backend-pool"
              }
            ],
            "backend_http_settings": [
              {
                "affinity_cookie_name": "",
                "authentication_certificate": [],
                "connection_draining": [],
                "cookie_based_affinity": "Disabled",
                "host_name": "",
                "id": "/subscriptions/b2375b5f-8dab-4436-b87c-32bc7fdce5d0/resourceGroups/test-network-rg/providers/Microsoft.Network/applicationGateways/test-appgwy/backendHttpSettingsCollection/backend-htst",
                "name": "backend-htst",
                "path": "/",
                "pick_host_name_from_backend_address": false,
                "port": 80,
                "probe_id": "",
                "probe_name": "",
                "protocol": "Http",
                "request_timeout": 1,
                "trusted_root_certificate_names": []
              }
            ],
            "custom_error_configuration": [],
            "enable_http2": false,
            "fips_enabled": false,
            "firewall_policy_id": null,
            "force_firewall_policy_association": false,
            "frontend_ip_configuration": [
              {
                "id": "/subscriptions/b2375b5f-8dab-4436-b87c-32bc7fdce5d0/resourceGroups/test-network-rg/providers/Microsoft.Network/applicationGateways/test-appgwy/frontendIPConfigurations/frontend-ip",
                "name": "frontend-ip",
                "private_ip_address": "",
                "private_ip_address_allocation": "Dynamic",
                "private_link_configuration_id": "",
                "private_link_configuration_name": "",
                "public_ip_address_id": "/subscriptions/b2375b5f-8dab-4436-b87c-32bc7fdce5d0/resourceGroups/test-network-rg/providers/Microsoft.Network/publicIPAddresses/test-appgwy-pip",
                "subnet_id": ""
              }
            ],
            "frontend_port": [
              {
                "id": "/subscriptions/b2375b5f-8dab-4436-b87c-32bc7fdce5d0/resourceGroups/test-network-rg/providers/Microsoft.Network/applicationGateways/test-appgwy/frontendPorts/frontend-port",
                "name": "frontend-port",
                "port": 80
              }
            ],
            "gateway_ip_configuration": [
              {
                "id": "/subscriptions/b2375b5f-8dab-4436-b87c-32bc7fdce5d0/resourceGroups/test-network-rg/providers/Microsoft.Network/applicationGateways/test-appgwy/gatewayIPConfigurations/my-gateway-ip-configuration",
                "name": "my-gateway-ip-configuration",
                "subnet_id": "/subscriptions/b2375b5f-8dab-4436-b87c-32bc7fdce5d0/resourceGroups/test-network-rg/providers/Microsoft.Network/virtualNetworks/hub-vnet/subnets/AppGatewaySubnet"
              }
            ],
            "http_listener": [
              {
                "custom_error_configuration": [],
                "firewall_policy_id": "",
                "frontend_ip_configuration_id": "/subscriptions/b2375b5f-8dab-4436-b87c-32bc7fdce5d0/resourceGroups/test-network-rg/providers/Microsoft.Network/applicationGateways/test-appgwy/frontendIPConfigurations/frontend-ip",
                "frontend_ip_configuration_name": "frontend-ip",
                "frontend_port_id": "/subscriptions/b2375b5f-8dab-4436-b87c-32bc7fdce5d0/resourceGroups/test-network-rg/providers/Microsoft.Network/applicationGateways/test-appgwy/frontendPorts/frontend-port",
                "frontend_port_name": "frontend-port",
                "host_name": "",
                "host_names": [],
                "id": "/subscriptions/b2375b5f-8dab-4436-b87c-32bc7fdce5d0/resourceGroups/test-network-rg/providers/Microsoft.Network/applicationGateways/test-appgwy/httpListeners/http-listener",
                "name": "http-listener",
                "protocol": "Http",
                "require_sni": false,
                "ssl_certificate_id": "",
                "ssl_certificate_name": "",
                "ssl_profile_id": "",
                "ssl_profile_name": ""
              }
            ],
            "id": "/subscriptions/b2375b5f-8dab-4436-b87c-32bc7fdce5d0/resourceGroups/test-network-rg/providers/Microsoft.Network/applicationGateways/test-appgwy",
            "identity": [],
            "location": "australiaeast",
            "name": "test-appgwy",
            "private_endpoint_connection": [],
            "private_link_configuration": [],
            "probe": [],
            "redirect_configuration": [],
            "request_routing_rule": [
              {
                "backend_address_pool_id": "/subscriptions/b2375b5f-8dab-4436-b87c-32bc7fdce5d0/resourceGroups/test-network-rg/providers/Microsoft.Network/applicationGateways/test-appgwy/backendAddressPools/backend-pool",
                "backend_address_pool_name": "backend-pool",
                "backend_http_settings_id": "/subscriptions/b2375b5f-8dab-4436-b87c-32bc7fdce5d0/resourceGroups/test-network-rg/providers/Microsoft.Network/applicationGateways/test-appgwy/backendHttpSettingsCollection/backend-htst",
                "backend_http_settings_name": "backend-htst",
                "http_listener_id": "/subscriptions/b2375b5f-8dab-4436-b87c-32bc7fdce5d0/resourceGroups/test-network-rg/providers/Microsoft.Network/applicationGateways/test-appgwy/httpListeners/http-listener",
                "http_listener_name": "http-listener",
                "id": "/subscriptions/b2375b5f-8dab-4436-b87c-32bc7fdce5d0/resourceGroups/test-network-rg/providers/Microsoft.Network/applicationGateways/test-appgwy/requestRoutingRules/req-routing-rule",
                "name": "req-routing-rule",
                "priority": 0,
                "redirect_configuration_id": "",
                "redirect_configuration_name": "",
                "rewrite_rule_set_id": "",
                "rewrite_rule_set_name": "",
                "rule_type": "Basic",
                "url_path_map_id": "",
                "url_path_map_name": ""
              }
            ],
            "resource_group_name": "test-network-rg",
            "rewrite_rule_set": [],
            "sku": [
              {
                "capacity": 1,
                "name": "WAF_v2",
                "tier": "WAF_v2"
              }
            ],
            "ssl_certificate": [],
            "ssl_policy": [
              {
                "cipher_suites": [],
                "disabled_protocols": [],
                "min_protocol_version": "",
                "policy_name": "AppGwSslPolicy20150501",
                "policy_type": "Predefined"
              }
            ],
            "ssl_profile": [],
            "tags": {
              "costcentre": "12345",
              "environment": "test"
            },
            "timeouts": null,
            "trusted_client_certificate": [],
            "trusted_root_certificate": [],
            "url_path_map": [],
            "waf_configuration": [],
            "zones": null
          },
          "sensitive_attributes": [],
          "private": "eyJlMmJmYjczMC1lY2FhLTExZTYtOGY4OC0zNDM2M2JjN2M0YzAiOnsiY3JlYXRlIjo1NDAwMDAwMDAwMDAwLCJkZWxldGUiOjU0MDAwMDAwMDAwMDAsInJlYWQiOjMwMDAwMDAwMDAwMCwidXBkYXRlIjo1NDAwMDAwMDAwMDAwfX0=",
          "dependencies": [
            "azurerm_public_ip.app_gateway_pip",
            "azurerm_resource_group.rg",
            "azurerm_virtual_network.vnet"
          ]
        }
      ]
    },
    {
      "mode": "managed",
      "type": "azurerm_firewall",
      "name": "az_firewall",
      "provider": "provider[\"registry.terraform.io/hashicorp/azurerm\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "dns_servers": null,
            "firewall_policy_id": null,
            "id": "/subscriptions/b2375b5f-8dab-4436-b87c-32bc7fdce5d0/resourceGroups/test-network-rg/providers/Microsoft.Network/azureFirewalls/test-fw",
            "ip_configuration": [
              {
                "name": "configuration",
                "private_ip_address": "10.0.1.4",
                "public_ip_address_id": "/subscriptions/b2375b5f-8dab-4436-b87c-32bc7fdce5d0/resourceGroups/test-network-rg/providers/Microsoft.Network/publicIPAddresses/test-fw-pip",
                "subnet_id": "/subscriptions/b2375b5f-8dab-4436-b87c-32bc7fdce5d0/resourceGroups/test-network-rg/providers/Microsoft.Network/virtualNetworks/hub-vnet/subnets/AzureFirewallSubnet"
              }
            ],
            "location": "australiaeast",
            "management_ip_configuration": [],
            "name": "test-fw",
            "private_ip_ranges": null,
            "resource_group_name": "test-network-rg",
            "sku_name": "AZFW_VNet",
            "sku_tier": "Standard",
            "tags": {
              "costcentre": "12345",
              "environment": "test"
            },
            "threat_intel_mode": "Alert",
            "timeouts": null,
            "virtual_hub": [],
            "zones": null
          },
          "sensitive_attributes": [],
          "private": "eyJlMmJmYjczMC1lY2FhLTExZTYtOGY4OC0zNDM2M2JjN2M0YzAiOnsiY3JlYXRlIjo1NDAwMDAwMDAwMDAwLCJkZWxldGUiOjU0MDAwMDAwMDAwMDAsInJlYWQiOjMwMDAwMDAwMDAwMCwidXBkYXRlIjo1NDAwMDAwMDAwMDAwfX0=",
          "dependencies": [
            "azurerm_public_ip.az_firewall_pip",
            "azurerm_resource_group.rg",
            "azurerm_virtual_network.vnet"
          ]
        }
      ]
    },
    {
      "mode": "managed",
      "type": "azurerm_firewall_application_rule_collection",
      "name": "az_application_rules",
      "provider": "provider[\"registry.terraform.io/hashicorp/azurerm\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "action": "Allow",
            "azure_firewall_name": "test-fw",
            "id": "/subscriptions/b2375b5f-8dab-4436-b87c-32bc7fdce5d0/resourceGroups/test-network-rg/providers/Microsoft.Network/azureFirewalls/test-fw/applicationRuleCollections/application-rules",
            "name": "application-rules",
            "priority": 1000,
            "resource_group_name": "test-network-rg",
            "rule": [
              {
                "description": "",
                "fqdn_tags": null,
                "name": "allow aks services",
                "protocol": [
                  {
                    "port": 443,
                    "type": "Https"
                  },
                  {
                    "port": 80,
                    "type": "Http"
                  }
                ],
                "source_addresses": [
                  "10.0.0.0/16",
                  "10.1.0.0/16",
                  "10.2.0.0/16"
                ],
                "source_ip_groups": null,
                "target_fqdns": [
                  "quay.io",
                  "*.azmk8s.io",
                  "k8s.gcr.io",
                  "*.auth.docker.io",
                  "*.cloudflare.docker.io",
                  "*.cloudflare.docker.com",
                  "*.registry-1.docker.io"
                ]
              },
              {
                "description": "",
                "fqdn_tags": null,
                "name": "allow oss services",
                "protocol": [
                  {
                    "port": 443,
                    "type": "Https"
                  },
                  {
                    "port": 80,
                    "type": "Http"
                  }
                ],
                "source_addresses": [
                  "10.0.0.0/16",
                  "10.1.0.0/16",
                  "10.2.0.0/16"
                ],
                "source_ip_groups": null,
                "target_fqdns": [
                  "download.opensuse.org",
                  "login.microsoftonline.com",
                  "*.ubuntu.com",
                  "dc.services.visualstudio.com",
                  "*.opinsights.azure.com",
                  "github.com",
                  "gcr.io",
                  "*.github.com",
                  "raw.githubusercontent.com",
                  "*.ubuntu.com",
                  "api.snapcraft.io",
                  "download.opensuse.org",
                  "storage.googleapis.com",
                  "security.ubuntu.com",
                  "azure.archive.ubuntu.com",
                  "changelogs.ubuntu.com"
                ]
              },
              {
                "description": "",
                "fqdn_tags": null,
                "name": "allow azure services",
                "protocol": [
                  {
                    "port": 443,
                    "type": "Https"
                  },
                  {
                    "port": 80,
                    "type": "Http"
                  }
                ],
                "source_addresses": [
                  "10.0.0.0/16",
                  "10.1.0.0/16",
                  "10.2.0.0/16"
                ],
                "source_ip_groups": null,
                "target_fqdns": [
                  "*.azurecr.io",
                  "*.blob.core.windows.net",
                  "*.trafficmanager.net",
                  "*.azureedge.net",
                  "*.microsoft.com",
                  "*.core.windows.net",
                  "aka.ms",
                  "*.azure-automation.net",
                  "*.azure.com",
                  "gov-prod-policy-data.trafficmanager.net",
                  "*.gk.australiaeast.azmk8s.io",
                  "*.monitoring.azure.com",
                  "*.oms.opinsights.azure.com",
                  "*.ods.opinsights.azure.com",
                  "*.microsoftonline.com",
                  "*.data.mcr.microsoft.com",
                  "*.cdn.mscr.io",
                  "mcr.microsoft.com",
                  "management.azure.com",
                  "login.microsoftonline.com",
                  "packages.microsoft.com"
                ]
              },
              {
                "description": "",
                "fqdn_tags": null,
                "name": "osupdates",
                "protocol": [
                  {
                    "port": 443,
                    "type": "Https"
                  },
                  {
                    "port": 80,
                    "type": "Http"
                  }
                ],
                "source_addresses": [
                  "10.0.0.0/16",
                  "10.1.0.0/16",
                  "10.2.0.0/16"
                ],
                "source_ip_groups": null,
                "target_fqdns": [
                  "download.opensuse.org",
                  "security.ubuntu.com",
                  "packages.microsoft.com",
                  "snapcraft.io"
                ]
              }
            ],
            "timeouts": null
          },
          "sensitive_attributes": [],
          "private": "eyJlMmJmYjczMC1lY2FhLTExZTYtOGY4OC0zNDM2M2JjN2M0YzAiOnsiY3JlYXRlIjoxODAwMDAwMDAwMDAwLCJkZWxldGUiOjE4MDAwMDAwMDAwMDAsInJlYWQiOjMwMDAwMDAwMDAwMCwidXBkYXRlIjoxODAwMDAwMDAwMDAwfX0=",
          "dependencies": [
            "azurerm_firewall.az_firewall",
            "azurerm_public_ip.az_firewall_pip",
            "azurerm_resource_group.rg",
            "azurerm_virtual_network.vnet"
          ]
        }
      ]
    },
    {
      "mode": "managed",
      "type": "azurerm_firewall_nat_rule_collection",
      "name": "nat_rules",
      "provider": "provider[\"registry.terraform.io/hashicorp/azurerm\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "action": "Dnat",
            "azure_firewall_name": "test-fw",
            "id": "/subscriptions/b2375b5f-8dab-4436-b87c-32bc7fdce5d0/resourceGroups/test-network-rg/providers/Microsoft.Network/azureFirewalls/test-fw/natRuleCollections/nat-rules",
            "name": "nat-rules",
            "priority": 1000,
            "resource_group_name": "test-network-rg",
            "rule": [
              {
                "description": "",
                "destination_addresses": [
                  "4.197.237.62"
                ],
                "destination_ports": [
                  "22"
                ],
                "name": "ssh-rule",
                "protocols": [
                  "TCP"
                ],
                "source_addresses": [
                  "*"
                ],
                "source_ip_groups": null,
                "translated_address": "10.0.2.4",
                "translated_port": "22"
              }
            ],
            "timeouts": null
          },
          "sensitive_attributes": [],
          "private": "eyJlMmJmYjczMC1lY2FhLTExZTYtOGY4OC0zNDM2M2JjN2M0YzAiOnsiY3JlYXRlIjoxODAwMDAwMDAwMDAwLCJkZWxldGUiOjE4MDAwMDAwMDAwMDAsInJlYWQiOjMwMDAwMDAwMDAwMCwidXBkYXRlIjoxODAwMDAwMDAwMDAwfX0=",
          "dependencies": [
            "azurerm_firewall.az_firewall",
            "azurerm_network_interface.bastion_vm_nic",
            "azurerm_public_ip.az_firewall_pip",
            "azurerm_resource_group.rg",
            "azurerm_virtual_network.vnet"
          ]
        }
      ]
    },
    {
      "mode": "managed",
      "type": "azurerm_firewall_network_rule_collection",
      "name": "az_network_rules",
      "provider": "provider[\"registry.terraform.io/hashicorp/azurerm\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "action": "Allow",
            "azure_firewall_name": "test-fw",
            "id": "/subscriptions/b2375b5f-8dab-4436-b87c-32bc7fdce5d0/resourceGroups/test-network-rg/providers/Microsoft.Network/azureFirewalls/test-fw/networkRuleCollections/network-rules",
            "name": "network-rules",
            "priority": 1000,
            "resource_group_name": "test-network-rg",
            "rule": [
              {
                "description": "",
                "destination_addresses": [
                  "*"
                ],
                "destination_fqdns": null,
                "destination_ip_groups": null,
                "destination_ports": [
                  "123"
                ],
                "name": "allow time service",
                "protocols": [
                  "UDP"
                ],
                "source_addresses": [
                  "10.0.0.0/16",
                  "10.1.0.0/16",
                  "10.2.0.0/16"
                ],
                "source_ip_groups": null
              },
              {
                "description": "",
                "destination_addresses": [
                  "*"
                ],
                "destination_fqdns": null,
                "destination_ip_groups": null,
                "destination_ports": [
                  "53"
                ],
                "name": "allow dns service",
                "protocols": [
                  "TCP",
                  "UDP"
                ],
                "source_addresses": [
                  "10.0.0.0/16",
                  "10.1.0.0/16",
                  "10.2.0.0/16"
                ],
                "source_ip_groups": null
              },
              {
                "description": "",
                "destination_addresses": [
                  "AzureContainerRegistry",
                  "MicrosoftContainerRegistry",
                  "AzureActiveDirectory"
                ],
                "destination_fqdns": null,
                "destination_ip_groups": null,
                "destination_ports": [
                  "*"
                ],
                "name": "allow tagged services",
                "protocols": [
                  "TCP",
                  "UDP"
                ],
                "source_addresses": [
                  "10.0.0.0/16",
                  "10.1.0.0/16",
                  "10.2.0.0/16"
                ],
                "source_ip_groups": null
              }
            ],
            "timeouts": null
          },
          "sensitive_attributes": [],
          "private": "eyJlMmJmYjczMC1lY2FhLTExZTYtOGY4OC0zNDM2M2JjN2M0YzAiOnsiY3JlYXRlIjoxODAwMDAwMDAwMDAwLCJkZWxldGUiOjE4MDAwMDAwMDAwMDAsInJlYWQiOjMwMDAwMDAwMDAwMCwidXBkYXRlIjoxODAwMDAwMDAwMDAwfX0=",
          "dependencies": [
            "azurerm_firewall.az_firewall",
            "azurerm_public_ip.az_firewall_pip",
            "azurerm_resource_group.rg",
            "azurerm_virtual_network.vnet"
          ]
        }
      ]
    },
    {
      "mode": "managed",
      "type": "azurerm_log_analytics_workspace",
      "name": "workspace",
      "provider": "provider[\"registry.terraform.io/hashicorp/azurerm\"]",
      "instances": [
        {
          "schema_version": 2,
          "attributes": {
            "daily_quota_gb": -1,
            "id": "/subscriptions/b2375b5f-8dab-4436-b87c-32bc7fdce5d0/resourceGroups/test-mgmt-rg/providers/Microsoft.OperationalInsights/workspaces/test-ae52f492-ws",
            "internet_ingestion_enabled": true,
            "internet_query_enabled": true,
            "location": "australiaeast",
            "name": "test-ae52f492-ws",
            "primary_shared_key": "Armpi2sn/axmW1gOB0oNnw/E1oJf9K5rSrMDN64viHKaZeEQsOKugcMlfJak6ZkG2vxoPRMp1V33Vf2rpsgiPQ==",
            "reservation_capacity_in_gb_per_day": null,
            "resource_group_name": "test-mgmt-rg",
            "retention_in_days": 30,
            "secondary_shared_key": "vFqix8leigXLdyr2Ni/aQzQgkyLLvuQfM9xu84lk+nZr2B/OSZgU3MrQgeu5djvaPyJmGIdl2GTlt4Fn2kmU9g==",
            "sku": "PerGB2018",
            "tags": {
              "costcentre": "12345",
              "environment": "test"
            },
            "timeouts": null,
            "workspace_id": "bb16bf3e-d459-4738-bd35-5467aeadbad3"
          },
          "sensitive_attributes": [
            [
              {
                "type": "get_attr",
                "value": "primary_shared_key"
              }
            ],
            [
              {
                "type": "get_attr",
                "value": "secondary_shared_key"
              }
            ]
          ],
          "private": "eyJlMmJmYjczMC1lY2FhLTExZTYtOGY4OC0zNDM2M2JjN2M0YzAiOnsiY3JlYXRlIjoxODAwMDAwMDAwMDAwLCJkZWxldGUiOjE4MDAwMDAwMDAwMDAsInJlYWQiOjMwMDAwMDAwMDAwMCwidXBkYXRlIjoxODAwMDAwMDAwMDAwfSwic2NoZW1hX3ZlcnNpb24iOiIyIn0=",
          "dependencies": [
            "azurerm_resource_group.rg",
            "random_id.laws"
          ]
        }
      ]
    },
    {
      "mode": "managed",
      "type": "azurerm_network_interface",
      "name": "bastion_vm_nic",
      "provider": "provider[\"registry.terraform.io/hashicorp/azurerm\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "applied_dns_servers": [],
            "dns_servers": [],
            "edge_zone": "",
            "enable_accelerated_networking": false,
            "enable_ip_forwarding": false,
            "id": "/subscriptions/b2375b5f-8dab-4436-b87c-32bc7fdce5d0/resourceGroups/test-mgmt-rg/providers/Microsoft.Network/networkInterfaces/test-bas-vm-nic",
            "internal_dns_name_label": "",
            "internal_domain_name_suffix": "fooiv2jwm14erghcra5xmsyeyf.px.internal.cloudapp.net",
            "ip_configuration": [
              {
                "gateway_load_balancer_frontend_ip_configuration_id": "",
                "name": "ipconfig1",
                "primary": true,
                "private_ip_address": "10.0.2.4",
                "private_ip_address_allocation": "Dynamic",
                "private_ip_address_version": "IPv4",
                "public_ip_address_id": "",
                "subnet_id": "/subscriptions/b2375b5f-8dab-4436-b87c-32bc7fdce5d0/resourceGroups/test-network-rg/providers/Microsoft.Network/virtualNetworks/hub-vnet/subnets/BastionSubnet"
              }
            ],
            "location": "australiaeast",
            "mac_address": "",
            "name": "test-bas-vm-nic",
            "private_ip_address": "10.0.2.4",
            "private_ip_addresses": [
              "10.0.2.4"
            ],
            "resource_group_name": "test-mgmt-rg",
            "tags": null,
            "timeouts": null,
            "virtual_machine_id": ""
          },
          "sensitive_attributes": [],
          "private": "eyJlMmJmYjczMC1lY2FhLTExZTYtOGY4OC0zNDM2M2JjN2M0YzAiOnsiY3JlYXRlIjoxODAwMDAwMDAwMDAwLCJkZWxldGUiOjE4MDAwMDAwMDAwMDAsInJlYWQiOjMwMDAwMDAwMDAwMCwidXBkYXRlIjoxODAwMDAwMDAwMDAwfX0=",
          "dependencies": [
            "azurerm_resource_group.rg",
            "azurerm_virtual_network.vnet"
          ]
        }
      ]
    },
    {
      "mode": "managed",
      "type": "azurerm_network_security_group",
      "name": "bastion_subnet_nsg",
      "provider": "provider[\"registry.terraform.io/hashicorp/azurerm\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "id": "/subscriptions/b2375b5f-8dab-4436-b87c-32bc7fdce5d0/resourceGroups/test-mgmt-rg/providers/Microsoft.Network/networkSecurityGroups/test-bas-rule",
            "location": "australiaeast",
            "name": "test-bas-rule",
            "resource_group_name": "test-mgmt-rg",
            "security_rule": [
              {
                "access": "Allow",
                "description": "",
                "destination_address_prefix": "10.0.2.0/24",
                "destination_address_prefixes": [],
                "destination_application_security_group_ids": [],
                "destination_port_range": "*",
                "destination_port_ranges": [],
                "direction": "Inbound",
                "name": "allow-bastion-subnet-internet-inbound-ssh",
                "priority": 1000,
                "protocol": "Tcp",
                "source_address_prefix": "4.197.237.62/32",
                "source_address_prefixes": [],
                "source_application_security_group_ids": [],
                "source_port_range": "*",
                "source_port_ranges": []
              }
            ],
            "tags": {
              "costcentre": "12345",
              "environment": "test"
            },
            "timeouts": null
          },
          "sensitive_attributes": [],
          "private": "eyJlMmJmYjczMC1lY2FhLTExZTYtOGY4OC0zNDM2M2JjN2M0YzAiOnsiY3JlYXRlIjoxODAwMDAwMDAwMDAwLCJkZWxldGUiOjE4MDAwMDAwMDAwMDAsInJlYWQiOjMwMDAwMDAwMDAwMCwidXBkYXRlIjoxODAwMDAwMDAwMDAwfX0=",
          "dependencies": [
            "azurerm_public_ip.az_firewall_pip",
            "azurerm_resource_group.rg",
            "azurerm_virtual_network.vnet"
          ]
        }
      ]
    },
    {
      "mode": "managed",
      "type": "azurerm_public_ip",
      "name": "app_gateway_pip",
      "provider": "provider[\"registry.terraform.io/hashicorp/azurerm\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "allocation_method": "Static",
            "domain_name_label": null,
            "edge_zone": "",
            "fqdn": null,
            "id": "/subscriptions/b2375b5f-8dab-4436-b87c-32bc7fdce5d0/resourceGroups/test-network-rg/providers/Microsoft.Network/publicIPAddresses/test-appgwy-pip",
            "idle_timeout_in_minutes": 4,
            "ip_address": "4.197.237.61",
            "ip_tags": null,
            "ip_version": "IPv4",
            "location": "australiaeast",
            "name": "test-appgwy-pip",
            "public_ip_prefix_id": null,
            "resource_group_name": "test-network-rg",
            "reverse_fqdn": null,
            "sku": "Standard",
            "sku_tier": "Regional",
            "tags": null,
            "timeouts": null,
            "zones": null
          },
          "sensitive_attributes": [],
          "private": "eyJlMmJmYjczMC1lY2FhLTExZTYtOGY4OC0zNDM2M2JjN2M0YzAiOnsiY3JlYXRlIjoxODAwMDAwMDAwMDAwLCJkZWxldGUiOjE4MDAwMDAwMDAwMDAsInJlYWQiOjMwMDAwMDAwMDAwMCwidXBkYXRlIjoxODAwMDAwMDAwMDAwfX0=",
          "dependencies": [
            "azurerm_resource_group.rg"
          ]
        }
      ]
    },
    {
      "mode": "managed",
      "type": "azurerm_public_ip",
      "name": "az_firewall_pip",
      "provider": "provider[\"registry.terraform.io/hashicorp/azurerm\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "allocation_method": "Static",
            "domain_name_label": null,
            "edge_zone": "",
            "fqdn": null,
            "id": "/subscriptions/b2375b5f-8dab-4436-b87c-32bc7fdce5d0/resourceGroups/test-network-rg/providers/Microsoft.Network/publicIPAddresses/test-fw-pip",
            "idle_timeout_in_minutes": 4,
            "ip_address": "4.197.237.62",
            "ip_tags": null,
            "ip_version": "IPv4",
            "location": "australiaeast",
            "name": "test-fw-pip",
            "public_ip_prefix_id": null,
            "resource_group_name": "test-network-rg",
            "reverse_fqdn": null,
            "sku": "Standard",
            "sku_tier": "Regional",
            "tags": {
              "costcentre": "12345",
              "environment": "test"
            },
            "timeouts": null,
            "zones": null
          },
          "sensitive_attributes": [],
          "private": "eyJlMmJmYjczMC1lY2FhLTExZTYtOGY4OC0zNDM2M2JjN2M0YzAiOnsiY3JlYXRlIjoxODAwMDAwMDAwMDAwLCJkZWxldGUiOjE4MDAwMDAwMDAwMDAsInJlYWQiOjMwMDAwMDAwMDAwMCwidXBkYXRlIjoxODAwMDAwMDAwMDAwfX0=",
          "dependencies": [
            "azurerm_resource_group.rg"
          ]
        }
      ]
    },
    {
      "mode": "managed",
      "type": "azurerm_resource_group",
      "name": "rg",
      "provider": "provider[\"registry.terraform.io/hashicorp/azurerm\"]",
      "instances": [
        {
          "index_key": "mgmt-rg",
          "schema_version": 0,
          "attributes": {
            "id": "/subscriptions/b2375b5f-8dab-4436-b87c-32bc7fdce5d0/resourceGroups/test-mgmt-rg",
            "location": "australiaeast",
            "name": "test-mgmt-rg",
            "tags": {
              "costcentre": "12345",
              "environment": "test"
            },
            "timeouts": null
          },
          "sensitive_attributes": [],
          "private": "eyJlMmJmYjczMC1lY2FhLTExZTYtOGY4OC0zNDM2M2JjN2M0YzAiOnsiY3JlYXRlIjo1NDAwMDAwMDAwMDAwLCJkZWxldGUiOjU0MDAwMDAwMDAwMDAsInJlYWQiOjMwMDAwMDAwMDAwMCwidXBkYXRlIjo1NDAwMDAwMDAwMDAwfX0="
        },
        {
          "index_key": "network-rg",
          "schema_version": 0,
          "attributes": {
            "id": "/subscriptions/b2375b5f-8dab-4436-b87c-32bc7fdce5d0/resourceGroups/test-network-rg",
            "location": "australiaeast",
            "name": "test-network-rg",
            "tags": {
              "costcentre": "12345",
              "environment": "test"
            },
            "timeouts": null
          },
          "sensitive_attributes": [],
          "private": "eyJlMmJmYjczMC1lY2FhLTExZTYtOGY4OC0zNDM2M2JjN2M0YzAiOnsiY3JlYXRlIjo1NDAwMDAwMDAwMDAwLCJkZWxldGUiOjU0MDAwMDAwMDAwMDAsInJlYWQiOjMwMDAwMDAwMDAwMCwidXBkYXRlIjo1NDAwMDAwMDAwMDAwfX0="
        },
        {
          "index_key": "nonprod-aks-rg",
          "schema_version": 0,
          "attributes": {
            "id": "/subscriptions/b2375b5f-8dab-4436-b87c-32bc7fdce5d0/resourceGroups/test-nonprod-aks-rg",
            "location": "australiaeast",
            "name": "test-nonprod-aks-rg",
            "tags": {
              "costcentre": "12345",
              "environment": "test"
            },
            "timeouts": null
          },
          "sensitive_attributes": [],
          "private": "eyJlMmJmYjczMC1lY2FhLTExZTYtOGY4OC0zNDM2M2JjN2M0YzAiOnsiY3JlYXRlIjo1NDAwMDAwMDAwMDAwLCJkZWxldGUiOjU0MDAwMDAwMDAwMDAsInJlYWQiOjMwMDAwMDAwMDAwMCwidXBkYXRlIjo1NDAwMDAwMDAwMDAwfX0="
        },
        {
          "index_key": "prod-aks-rg",
          "schema_version": 0,
          "attributes": {
            "id": "/subscriptions/b2375b5f-8dab-4436-b87c-32bc7fdce5d0/resourceGroups/test-prod-aks-rg",
            "location": "australiaeast",
            "name": "test-prod-aks-rg",
            "tags": {
              "costcentre": "12345",
              "environment": "test"
            },
            "timeouts": null
          },
          "sensitive_attributes": [],
          "private": "eyJlMmJmYjczMC1lY2FhLTExZTYtOGY4OC0zNDM2M2JjN2M0YzAiOnsiY3JlYXRlIjo1NDAwMDAwMDAwMDAwLCJkZWxldGUiOjU0MDAwMDAwMDAwMDAsInJlYWQiOjMwMDAwMDAwMDAwMCwidXBkYXRlIjo1NDAwMDAwMDAwMDAwfX0="
        }
      ]
    },
    {
      "mode": "managed",
      "type": "azurerm_route_table",
      "name": "aks_firewall_route_table",
      "provider": "provider[\"registry.terraform.io/hashicorp/azurerm\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "disable_bgp_route_propagation": false,
            "id": "/subscriptions/b2375b5f-8dab-4436-b87c-32bc7fdce5d0/resourceGroups/test-network-rg/providers/Microsoft.Network/routeTables/test-aks-fw-rt",
            "location": "australiaeast",
            "name": "test-aks-fw-rt",
            "resource_group_name": "test-network-rg",
            "route": [
              {
                "address_prefix": "0.0.0.0/0",
                "name": "default_spoke_fw_route",
                "next_hop_in_ip_address": "10.0.1.4",
                "next_hop_type": "VirtualAppliance"
              }
            ],
            "subnets": [],
            "tags": {
              "costcentre": "12345",
              "environment": "test"
            },
            "timeouts": null
          },
          "sensitive_attributes": [],
          "private": "eyJlMmJmYjczMC1lY2FhLTExZTYtOGY4OC0zNDM2M2JjN2M0YzAiOnsiY3JlYXRlIjoxODAwMDAwMDAwMDAwLCJkZWxldGUiOjE4MDAwMDAwMDAwMDAsInJlYWQiOjMwMDAwMDAwMDAwMCwidXBkYXRlIjoxODAwMDAwMDAwMDAwfX0=",
          "dependencies": [
            "azurerm_firewall.az_firewall",
            "azurerm_public_ip.az_firewall_pip",
            "azurerm_resource_group.rg",
            "azurerm_virtual_network.vnet"
          ]
        }
      ]
    },
    {
      "mode": "managed",
      "type": "azurerm_route_table",
      "name": "firewall_route_table",
      "provider": "provider[\"registry.terraform.io/hashicorp/azurerm\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "disable_bgp_route_propagation": false,
            "id": "/subscriptions/b2375b5f-8dab-4436-b87c-32bc7fdce5d0/resourceGroups/test-network-rg/providers/Microsoft.Network/routeTables/test-fw-rt",
            "location": "australiaeast",
            "name": "test-fw-rt",
            "resource_group_name": "test-network-rg",
            "route": [
              {
                "address_prefix": "10.0.0.0/16",
                "name": "default_hub_fw_route",
                "next_hop_in_ip_address": "10.0.1.4",
                "next_hop_type": "VirtualAppliance"
              }
            ],
            "subnets": [],
            "tags": {
              "costcentre": "12345",
              "environment": "test"
            },
            "timeouts": null
          },
          "sensitive_attributes": [],
          "private": "eyJlMmJmYjczMC1lY2FhLTExZTYtOGY4OC0zNDM2M2JjN2M0YzAiOnsiY3JlYXRlIjoxODAwMDAwMDAwMDAwLCJkZWxldGUiOjE4MDAwMDAwMDAwMDAsInJlYWQiOjMwMDAwMDAwMDAwMCwidXBkYXRlIjoxODAwMDAwMDAwMDAwfX0=",
          "dependencies": [
            "azurerm_firewall.az_firewall",
            "azurerm_public_ip.az_firewall_pip",
            "azurerm_resource_group.rg",
            "azurerm_virtual_network.vnet"
          ]
        }
      ]
    },
    {
      "mode": "managed",
      "type": "azurerm_subnet_network_security_group_association",
      "name": "bastion_subnet_nsg_assoc",
      "provider": "provider[\"registry.terraform.io/hashicorp/azurerm\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "id": "/subscriptions/b2375b5f-8dab-4436-b87c-32bc7fdce5d0/resourceGroups/test-network-rg/providers/Microsoft.Network/virtualNetworks/hub-vnet/subnets/BastionSubnet",
            "network_security_group_id": "/subscriptions/b2375b5f-8dab-4436-b87c-32bc7fdce5d0/resourceGroups/test-mgmt-rg/providers/Microsoft.Network/networkSecurityGroups/test-bas-rule",
            "subnet_id": "/subscriptions/b2375b5f-8dab-4436-b87c-32bc7fdce5d0/resourceGroups/test-network-rg/providers/Microsoft.Network/virtualNetworks/hub-vnet/subnets/BastionSubnet",
            "timeouts": null
          },
          "sensitive_attributes": [],
          "private": "eyJlMmJmYjczMC1lY2FhLTExZTYtOGY4OC0zNDM2M2JjN2M0YzAiOnsiY3JlYXRlIjoxODAwMDAwMDAwMDAwLCJkZWxldGUiOjE4MDAwMDAwMDAwMDAsInJlYWQiOjMwMDAwMDAwMDAwMCwidXBkYXRlIjoxODAwMDAwMDAwMDAwfX0=",
          "dependencies": [
            "azurerm_network_security_group.bastion_subnet_nsg",
            "azurerm_public_ip.az_firewall_pip",
            "azurerm_resource_group.rg",
            "azurerm_virtual_network.vnet"
          ]
        }
      ]
    },
    {
      "mode": "managed",
      "type": "azurerm_subnet_route_table_association",
      "name": "nonprod_spoke_subnet_1_route_table_assoc",
      "provider": "provider[\"registry.terraform.io/hashicorp/azurerm\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "id": "/subscriptions/b2375b5f-8dab-4436-b87c-32bc7fdce5d0/resourceGroups/test-network-rg/providers/Microsoft.Network/virtualNetworks/nonprod-spoke-vnet/subnets/nonprod-aks-subnet",
            "route_table_id": "/subscriptions/b2375b5f-8dab-4436-b87c-32bc7fdce5d0/resourceGroups/test-network-rg/providers/Microsoft.Network/routeTables/test-aks-fw-rt",
            "subnet_id": "/subscriptions/b2375b5f-8dab-4436-b87c-32bc7fdce5d0/resourceGroups/test-network-rg/providers/Microsoft.Network/virtualNetworks/nonprod-spoke-vnet/subnets/nonprod-aks-subnet",
            "timeouts": {
              "create": "2h",
              "delete": "2h",
              "read": null,
              "update": null
            }
          },
          "sensitive_attributes": [],
          "private": "eyJlMmJmYjczMC1lY2FhLTExZTYtOGY4OC0zNDM2M2JjN2M0YzAiOnsiY3JlYXRlIjo3MjAwMDAwMDAwMDAwLCJkZWxldGUiOjcyMDAwMDAwMDAwMDAsInJlYWQiOjMwMDAwMDAwMDAwMCwidXBkYXRlIjoxODAwMDAwMDAwMDAwfX0=",
          "dependencies": [
            "azurerm_firewall.az_firewall",
            "azurerm_public_ip.az_firewall_pip",
            "azurerm_resource_group.rg",
            "azurerm_route_table.aks_firewall_route_table",
            "azurerm_virtual_network.vnet"
          ]
        }
      ]
    },
    {
      "mode": "managed",
      "type": "azurerm_subnet_route_table_association",
      "name": "nonprod_spoke_subnet_2_route_table_assoc",
      "provider": "provider[\"registry.terraform.io/hashicorp/azurerm\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "id": "/subscriptions/b2375b5f-8dab-4436-b87c-32bc7fdce5d0/resourceGroups/test-network-rg/providers/Microsoft.Network/virtualNetworks/nonprod-spoke-vnet/subnets/nonprod-web-subnet",
            "route_table_id": "/subscriptions/b2375b5f-8dab-4436-b87c-32bc7fdce5d0/resourceGroups/test-network-rg/providers/Microsoft.Network/routeTables/test-aks-fw-rt",
            "subnet_id": "/subscriptions/b2375b5f-8dab-4436-b87c-32bc7fdce5d0/resourceGroups/test-network-rg/providers/Microsoft.Network/virtualNetworks/nonprod-spoke-vnet/subnets/nonprod-web-subnet",
            "timeouts": {
              "create": "2h",
              "delete": "2h",
              "read": null,
              "update": null
            }
          },
          "sensitive_attributes": [],
          "private": "eyJlMmJmYjczMC1lY2FhLTExZTYtOGY4OC0zNDM2M2JjN2M0YzAiOnsiY3JlYXRlIjo3MjAwMDAwMDAwMDAwLCJkZWxldGUiOjcyMDAwMDAwMDAwMDAsInJlYWQiOjMwMDAwMDAwMDAwMCwidXBkYXRlIjoxODAwMDAwMDAwMDAwfX0=",
          "dependencies": [
            "azurerm_firewall.az_firewall",
            "azurerm_public_ip.az_firewall_pip",
            "azurerm_resource_group.rg",
            "azurerm_route_table.aks_firewall_route_table",
            "azurerm_virtual_network.vnet"
          ]
        }
      ]
    },
    {
      "mode": "managed",
      "type": "azurerm_subnet_route_table_association",
      "name": "nonprod_spoke_subnet_3_route_table_assoc",
      "provider": "provider[\"registry.terraform.io/hashicorp/azurerm\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "id": "/subscriptions/b2375b5f-8dab-4436-b87c-32bc7fdce5d0/resourceGroups/test-network-rg/providers/Microsoft.Network/virtualNetworks/nonprod-spoke-vnet/subnets/nonprod-sql-subnet",
            "route_table_id": "/subscriptions/b2375b5f-8dab-4436-b87c-32bc7fdce5d0/resourceGroups/test-network-rg/providers/Microsoft.Network/routeTables/test-aks-fw-rt",
            "subnet_id": "/subscriptions/b2375b5f-8dab-4436-b87c-32bc7fdce5d0/resourceGroups/test-network-rg/providers/Microsoft.Network/virtualNetworks/nonprod-spoke-vnet/subnets/nonprod-sql-subnet",
            "timeouts": {
              "create": "2h",
              "delete": "2h",
              "read": null,
              "update": null
            }
          },
          "sensitive_attributes": [],
          "private": "eyJlMmJmYjczMC1lY2FhLTExZTYtOGY4OC0zNDM2M2JjN2M0YzAiOnsiY3JlYXRlIjo3MjAwMDAwMDAwMDAwLCJkZWxldGUiOjcyMDAwMDAwMDAwMDAsInJlYWQiOjMwMDAwMDAwMDAwMCwidXBkYXRlIjoxODAwMDAwMDAwMDAwfX0=",
          "dependencies": [
            "azurerm_firewall.az_firewall",
            "azurerm_public_ip.az_firewall_pip",
            "azurerm_resource_group.rg",
            "azurerm_route_table.aks_firewall_route_table",
            "azurerm_virtual_network.vnet"
          ]
        }
      ]
    },
    {
      "mode": "managed",
      "type": "azurerm_subnet_route_table_association",
      "name": "prod_spoke_subnet_1_route_table_assoc",
      "provider": "provider[\"registry.terraform.io/hashicorp/azurerm\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "id": "/subscriptions/b2375b5f-8dab-4436-b87c-32bc7fdce5d0/resourceGroups/test-network-rg/providers/Microsoft.Network/virtualNetworks/prod-spoke-vnet/subnets/prod-aks-subnet",
            "route_table_id": "/subscriptions/b2375b5f-8dab-4436-b87c-32bc7fdce5d0/resourceGroups/test-network-rg/providers/Microsoft.Network/routeTables/test-aks-fw-rt",
            "subnet_id": "/subscriptions/b2375b5f-8dab-4436-b87c-32bc7fdce5d0/resourceGroups/test-network-rg/providers/Microsoft.Network/virtualNetworks/prod-spoke-vnet/subnets/prod-aks-subnet",
            "timeouts": {
              "create": "2h",
              "delete": "2h",
              "read": null,
              "update": null
            }
          },
          "sensitive_attributes": [],
          "private": "eyJlMmJmYjczMC1lY2FhLTExZTYtOGY4OC0zNDM2M2JjN2M0YzAiOnsiY3JlYXRlIjo3MjAwMDAwMDAwMDAwLCJkZWxldGUiOjcyMDAwMDAwMDAwMDAsInJlYWQiOjMwMDAwMDAwMDAwMCwidXBkYXRlIjoxODAwMDAwMDAwMDAwfX0=",
          "dependencies": [
            "azurerm_firewall.az_firewall",
            "azurerm_public_ip.az_firewall_pip",
            "azurerm_resource_group.rg",
            "azurerm_route_table.aks_firewall_route_table",
            "azurerm_virtual_network.vnet"
          ]
        }
      ]
    },
    {
      "mode": "managed",
      "type": "azurerm_subnet_route_table_association",
      "name": "prod_spoke_subnet_2_route_table_assoc",
      "provider": "provider[\"registry.terraform.io/hashicorp/azurerm\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "id": "/subscriptions/b2375b5f-8dab-4436-b87c-32bc7fdce5d0/resourceGroups/test-network-rg/providers/Microsoft.Network/virtualNetworks/prod-spoke-vnet/subnets/prod-web-subnet",
            "route_table_id": "/subscriptions/b2375b5f-8dab-4436-b87c-32bc7fdce5d0/resourceGroups/test-network-rg/providers/Microsoft.Network/routeTables/test-aks-fw-rt",
            "subnet_id": "/subscriptions/b2375b5f-8dab-4436-b87c-32bc7fdce5d0/resourceGroups/test-network-rg/providers/Microsoft.Network/virtualNetworks/prod-spoke-vnet/subnets/prod-web-subnet",
            "timeouts": {
              "create": "2h",
              "delete": "2h",
              "read": null,
              "update": null
            }
          },
          "sensitive_attributes": [],
          "private": "eyJlMmJmYjczMC1lY2FhLTExZTYtOGY4OC0zNDM2M2JjN2M0YzAiOnsiY3JlYXRlIjo3MjAwMDAwMDAwMDAwLCJkZWxldGUiOjcyMDAwMDAwMDAwMDAsInJlYWQiOjMwMDAwMDAwMDAwMCwidXBkYXRlIjoxODAwMDAwMDAwMDAwfX0=",
          "dependencies": [
            "azurerm_firewall.az_firewall",
            "azurerm_public_ip.az_firewall_pip",
            "azurerm_resource_group.rg",
            "azurerm_route_table.aks_firewall_route_table",
            "azurerm_virtual_network.vnet"
          ]
        }
      ]
    },
    {
      "mode": "managed",
      "type": "azurerm_subnet_route_table_association",
      "name": "prod_spoke_subnet_3_route_table_assoc",
      "provider": "provider[\"registry.terraform.io/hashicorp/azurerm\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "id": "/subscriptions/b2375b5f-8dab-4436-b87c-32bc7fdce5d0/resourceGroups/test-network-rg/providers/Microsoft.Network/virtualNetworks/prod-spoke-vnet/subnets/prod-sql-subnet",
            "route_table_id": "/subscriptions/b2375b5f-8dab-4436-b87c-32bc7fdce5d0/resourceGroups/test-network-rg/providers/Microsoft.Network/routeTables/test-aks-fw-rt",
            "subnet_id": "/subscriptions/b2375b5f-8dab-4436-b87c-32bc7fdce5d0/resourceGroups/test-network-rg/providers/Microsoft.Network/virtualNetworks/prod-spoke-vnet/subnets/prod-sql-subnet",
            "timeouts": {
              "create": "2h",
              "delete": "2h",
              "read": null,
              "update": null
            }
          },
          "sensitive_attributes": [],
          "private": "eyJlMmJmYjczMC1lY2FhLTExZTYtOGY4OC0zNDM2M2JjN2M0YzAiOnsiY3JlYXRlIjo3MjAwMDAwMDAwMDAwLCJkZWxldGUiOjcyMDAwMDAwMDAwMDAsInJlYWQiOjMwMDAwMDAwMDAwMCwidXBkYXRlIjoxODAwMDAwMDAwMDAwfX0=",
          "dependencies": [
            "azurerm_firewall.az_firewall",
            "azurerm_public_ip.az_firewall_pip",
            "azurerm_resource_group.rg",
            "azurerm_route_table.aks_firewall_route_table",
            "azurerm_virtual_network.vnet"
          ]
        }
      ]
    },
    {
      "mode": "managed",
      "type": "azurerm_virtual_machine",
      "name": "bastion_vm",
      "provider": "provider[\"registry.terraform.io/hashicorp/azurerm\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "additional_capabilities": [],
            "availability_set_id": null,
            "boot_diagnostics": [],
            "delete_data_disks_on_termination": true,
            "delete_os_disk_on_termination": true,
            "id": "/subscriptions/b2375b5f-8dab-4436-b87c-32bc7fdce5d0/resourceGroups/test-mgmt-rg/providers/Microsoft.Compute/virtualMachines/test-bas-vm",
            "identity": [],
            "license_type": null,
            "location": "australiaeast",
            "name": "test-bas-vm",
            "network_interface_ids": [
              "/subscriptions/b2375b5f-8dab-4436-b87c-32bc7fdce5d0/resourceGroups/test-mgmt-rg/providers/Microsoft.Network/networkInterfaces/test-bas-vm-nic"
            ],
            "os_profile": [
              {
                "admin_password": "",
                "admin_username": "localadmin",
                "computer_name": "test-bas-vm",
                "custom_data": "7f7e3c290f8b2de30ee5f6922e2a77d2522e0241"
              }
            ],
            "os_profile_linux_config": [
              {
                "disable_password_authentication": true,
                "ssh_keys": [
                  {
                    "key_data": "ssh-rsa AAAAB3NzaC1yc2EAAAADAQABAAABAQDCKEnblRrHUsUf2zEhDC4YrXVDTf6Vj3eZhfIT22og0zo2hdpfUizcDZ+i0J4Bieh9zkcsGMZtMkBseMVVa5tLSNi7sAg79a8Bap5RmxMDgx53ZCrJtTC3Li4e/3xwoCjnl5ulvHs6u863G84o8zgFqLgedKHBmJxsdPw5ykLSmQ4K6Qk7VVll6YdSab7R6NIwW5dX7aP2paD8KRUqcZ1xlArNhHiUT3bWaFNRRUOsFLCxk2xyoXeu+kC9HM2lAztIbUkBQ+xFYIPts8yPJggb4WF6Iz0uENJ25lUGen4svy39ZkqcK0ZfgsKZpaJf/+0wUbjqW2tlAMczbTRsKr8r cbellee@CB-SBOOK-1809",
                    "path": "/home/localadmin/.ssh/authorized_keys"
                  }
                ]
              }
            ],
            "os_profile_secrets": [],
            "os_profile_windows_config": [],
            "plan": [],
            "primary_network_interface_id": null,
            "proximity_placement_group_id": null,
            "resource_group_name": "test-mgmt-rg",
            "storage_data_disk": [],
            "storage_image_reference": [
              {
                "id": "",
                "offer": "UbuntuServer",
                "publisher": "Canonical",
                "sku": "18.04-LTS",
                "version": "latest"
              }
            ],
            "storage_os_disk": [
              {
                "caching": "ReadWrite",
                "create_option": "FromImage",
                "disk_size_gb": 30,
                "image_uri": "",
                "managed_disk_id": "/subscriptions/b2375b5f-8dab-4436-b87c-32bc7fdce5d0/resourceGroups/test-mgmt-rg/providers/Microsoft.Compute/disks/test-bas-vm-os-disk",
                "managed_disk_type": "Standard_LRS",
                "name": "test-bas-vm-os-disk",
                "os_type": "Linux",
                "vhd_uri": "",
                "write_accelerator_enabled": false
              }
            ],
            "tags": {
              "environment": "staging"
            },
            "timeouts": null,
            "vm_size": "Standard_F2s_v2",
            "zones": null
          },
          "sensitive_attributes": [
            [
              {
                "type": "get_attr",
                "value": "os_profile"
              }
            ]
          ],
          "private": "eyJlMmJmYjczMC1lY2FhLTExZTYtOGY4OC0zNDM2M2JjN2M0YzAiOnsiY3JlYXRlIjozNjAwMDAwMDAwMDAwLCJkZWxldGUiOjM2MDAwMDAwMDAwMDAsInJlYWQiOjMwMDAwMDAwMDAwMCwidXBkYXRlIjozNjAwMDAwMDAwMDAwfX0=",
          "dependencies": [
            "azurerm_network_interface.bastion_vm_nic",
            "azurerm_resource_group.rg",
            "azurerm_virtual_network.vnet",
            "data.local_file.cloudinit"
          ]
        }
      ]
    },
    {
      "mode": "managed",
      "type": "azurerm_virtual_network",
      "name": "vnet",
      "provider": "provider[\"registry.terraform.io/hashicorp/azurerm\"]",
      "instances": [
        {
          "index_key": "hub-vnet",
          "schema_version": 0,
          "attributes": {
            "address_space": [
              "10.0.0.0/16"
            ],
            "bgp_community": "",
            "ddos_protection_plan": [],
            "dns_servers": [],
            "edge_zone": "",
            "flow_timeout_in_minutes": 0,
            "guid": "f18a9c2b-6636-48fc-98e2-883f764b04c5",
            "id": "/subscriptions/b2375b5f-8dab-4436-b87c-32bc7fdce5d0/resourceGroups/test-network-rg/providers/Microsoft.Network/virtualNetworks/hub-vnet",
            "location": "australiaeast",
            "name": "hub-vnet",
            "resource_group_name": "test-network-rg",
            "subnet": [
              {
                "address_prefix": "10.0.0.0/24",
                "id": "/subscriptions/b2375b5f-8dab-4436-b87c-32bc7fdce5d0/resourceGroups/test-network-rg/providers/Microsoft.Network/virtualNetworks/hub-vnet/subnets/GatewaySubnet",
                "name": "GatewaySubnet",
                "security_group": ""
              },
              {
                "address_prefix": "10.0.1.0/24",
                "id": "/subscriptions/b2375b5f-8dab-4436-b87c-32bc7fdce5d0/resourceGroups/test-network-rg/providers/Microsoft.Network/virtualNetworks/hub-vnet/subnets/AzureFirewallSubnet",
                "name": "AzureFirewallSubnet",
                "security_group": ""
              },
              {
                "address_prefix": "10.0.2.0/24",
                "id": "/subscriptions/b2375b5f-8dab-4436-b87c-32bc7fdce5d0/resourceGroups/test-network-rg/providers/Microsoft.Network/virtualNetworks/hub-vnet/subnets/BastionSubnet",
                "name": "BastionSubnet",
                "security_group": ""
              },
              {
                "address_prefix": "10.0.3.0/24",
                "id": "/subscriptions/b2375b5f-8dab-4436-b87c-32bc7fdce5d0/resourceGroups/test-network-rg/providers/Microsoft.Network/virtualNetworks/hub-vnet/subnets/AppGatewaySubnet",
                "name": "AppGatewaySubnet",
                "security_group": ""
              }
            ],
            "tags": {
              "costcentre": "12345",
              "environment": "test"
            },
            "timeouts": null
          },
          "sensitive_attributes": [],
          "private": "eyJlMmJmYjczMC1lY2FhLTExZTYtOGY4OC0zNDM2M2JjN2M0YzAiOnsiY3JlYXRlIjoxODAwMDAwMDAwMDAwLCJkZWxldGUiOjE4MDAwMDAwMDAwMDAsInJlYWQiOjMwMDAwMDAwMDAwMCwidXBkYXRlIjoxODAwMDAwMDAwMDAwfX0=",
          "dependencies": [
            "azurerm_resource_group.rg"
          ]
        },
        {
          "index_key": "nonprod-spoke-vnet",
          "schema_version": 0,
          "attributes": {
            "address_space": [
              "10.2.0.0/16"
            ],
            "bgp_community": "",
            "ddos_protection_plan": [],
            "dns_servers": [],
            "edge_zone": "",
            "flow_timeout_in_minutes": 0,
            "guid": "52c1e0c7-f0c4-4d2e-9605-0f7569c076d8",
            "id": "/subscriptions/b2375b5f-8dab-4436-b87c-32bc7fdce5d0/resourceGroups/test-network-rg/providers/Microsoft.Network/virtualNetworks/nonprod-spoke-vnet",
            "location": "australiaeast",
            "name": "nonprod-spoke-vnet",
            "resource_group_name": "test-network-rg",
            "subnet": [
              {
                "address_prefix": "10.2.0.0/24",
                "id": "/subscriptions/b2375b5f-8dab-4436-b87c-32bc7fdce5d0/resourceGroups/test-network-rg/providers/Microsoft.Network/virtualNetworks/nonprod-spoke-vnet/subnets/nonprod-aks-subnet",
                "name": "nonprod-aks-subnet",
                "security_group": ""
              },
              {
                "address_prefix": "10.2.1.0/24",
                "id": "/subscriptions/b2375b5f-8dab-4436-b87c-32bc7fdce5d0/resourceGroups/test-network-rg/providers/Microsoft.Network/virtualNetworks/nonprod-spoke-vnet/subnets/nonprod-web-subnet",
                "name": "nonprod-web-subnet",
                "security_group": ""
              },
              {
                "address_prefix": "10.2.2.0/24",
                "id": "/subscriptions/b2375b5f-8dab-4436-b87c-32bc7fdce5d0/resourceGroups/test-network-rg/providers/Microsoft.Network/virtualNetworks/nonprod-spoke-vnet/subnets/nonprod-sql-subnet",
                "name": "nonprod-sql-subnet",
                "security_group": ""
              }
            ],
            "tags": {
              "costcentre": "12345",
              "environment": "test"
            },
            "timeouts": null
          },
          "sensitive_attributes": [],
          "private": "eyJlMmJmYjczMC1lY2FhLTExZTYtOGY4OC0zNDM2M2JjN2M0YzAiOnsiY3JlYXRlIjoxODAwMDAwMDAwMDAwLCJkZWxldGUiOjE4MDAwMDAwMDAwMDAsInJlYWQiOjMwMDAwMDAwMDAwMCwidXBkYXRlIjoxODAwMDAwMDAwMDAwfX0=",
          "dependencies": [
            "azurerm_resource_group.rg"
          ]
        },
        {
          "index_key": "prod-spoke-vnet",
          "schema_version": 0,
          "attributes": {
            "address_space": [
              "10.1.0.0/16"
            ],
            "bgp_community": "",
            "ddos_protection_plan": [],
            "dns_servers": [],
            "edge_zone": "",
            "flow_timeout_in_minutes": 0,
            "guid": "476e6027-ec41-43c4-8f9e-d805886de62a",
            "id": "/subscriptions/b2375b5f-8dab-4436-b87c-32bc7fdce5d0/resourceGroups/test-network-rg/providers/Microsoft.Network/virtualNetworks/prod-spoke-vnet",
            "location": "australiaeast",
            "name": "prod-spoke-vnet",
            "resource_group_name": "test-network-rg",
            "subnet": [
              {
                "address_prefix": "10.1.0.0/24",
                "id": "/subscriptions/b2375b5f-8dab-4436-b87c-32bc7fdce5d0/resourceGroups/test-network-rg/providers/Microsoft.Network/virtualNetworks/prod-spoke-vnet/subnets/prod-aks-subnet",
                "name": "prod-aks-subnet",
                "security_group": ""
              },
              {
                "address_prefix": "10.1.1.0/24",
                "id": "/subscriptions/b2375b5f-8dab-4436-b87c-32bc7fdce5d0/resourceGroups/test-network-rg/providers/Microsoft.Network/virtualNetworks/prod-spoke-vnet/subnets/prod-web-subnet",
                "name": "prod-web-subnet",
                "security_group": ""
              },
              {
                "address_prefix": "10.1.2.0/24",
                "id": "/subscriptions/b2375b5f-8dab-4436-b87c-32bc7fdce5d0/resourceGroups/test-network-rg/providers/Microsoft.Network/virtualNetworks/prod-spoke-vnet/subnets/prod-sql-subnet",
                "name": "prod-sql-subnet",
                "security_group": ""
              }
            ],
            "tags": {
              "costcentre": "12345",
              "environment": "test"
            },
            "timeouts": null
          },
          "sensitive_attributes": [],
          "private": "eyJlMmJmYjczMC1lY2FhLTExZTYtOGY4OC0zNDM2M2JjN2M0YzAiOnsiY3JlYXRlIjoxODAwMDAwMDAwMDAwLCJkZWxldGUiOjE4MDAwMDAwMDAwMDAsInJlYWQiOjMwMDAwMDAwMDAwMCwidXBkYXRlIjoxODAwMDAwMDAwMDAwfX0=",
          "dependencies": [
            "azurerm_resource_group.rg"
          ]
        }
      ]
    },
    {
      "mode": "managed",
      "type": "azurerm_virtual_network_peering",
      "name": "hub_to_nonprod_spoke_peer",
      "provider": "provider[\"registry.terraform.io/hashicorp/azurerm\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "allow_forwarded_traffic": true,
            "allow_gateway_transit": false,
            "allow_virtual_network_access": true,
            "id": "/subscriptions/b2375b5f-8dab-4436-b87c-32bc7fdce5d0/resourceGroups/test-network-rg/providers/Microsoft.Network/virtualNetworks/hub-vnet/virtualNetworkPeerings/hub_to_nonprod_spoke_peer",
            "name": "hub_to_nonprod_spoke_peer",
            "remote_virtual_network_id": "/subscriptions/b2375b5f-8dab-4436-b87c-32bc7fdce5d0/resourceGroups/test-network-rg/providers/Microsoft.Network/virtualNetworks/nonprod-spoke-vnet",
            "resource_group_name": "test-network-rg",
            "timeouts": null,
            "use_remote_gateways": false,
            "virtual_network_name": "hub-vnet"
          },
          "sensitive_attributes": [],
          "private": "eyJlMmJmYjczMC1lY2FhLTExZTYtOGY4OC0zNDM2M2JjN2M0YzAiOnsiY3JlYXRlIjoxODAwMDAwMDAwMDAwLCJkZWxldGUiOjE4MDAwMDAwMDAwMDAsInJlYWQiOjMwMDAwMDAwMDAwMCwidXBkYXRlIjoxODAwMDAwMDAwMDAwfX0=",
          "dependencies": [
            "azurerm_resource_group.rg",
            "azurerm_virtual_network.vnet"
          ]
        }
      ]
    },
    {
      "mode": "managed",
      "type": "azurerm_virtual_network_peering",
      "name": "hub_to_prod_spoke_peer",
      "provider": "provider[\"registry.terraform.io/hashicorp/azurerm\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "allow_forwarded_traffic": true,
            "allow_gateway_transit": false,
            "allow_virtual_network_access": true,
            "id": "/subscriptions/b2375b5f-8dab-4436-b87c-32bc7fdce5d0/resourceGroups/test-network-rg/providers/Microsoft.Network/virtualNetworks/hub-vnet/virtualNetworkPeerings/hub_to_prod_spoke_peer",
            "name": "hub_to_prod_spoke_peer",
            "remote_virtual_network_id": "/subscriptions/b2375b5f-8dab-4436-b87c-32bc7fdce5d0/resourceGroups/test-network-rg/providers/Microsoft.Network/virtualNetworks/prod-spoke-vnet",
            "resource_group_name": "test-network-rg",
            "timeouts": null,
            "use_remote_gateways": false,
            "virtual_network_name": "hub-vnet"
          },
          "sensitive_attributes": [],
          "private": "eyJlMmJmYjczMC1lY2FhLTExZTYtOGY4OC0zNDM2M2JjN2M0YzAiOnsiY3JlYXRlIjoxODAwMDAwMDAwMDAwLCJkZWxldGUiOjE4MDAwMDAwMDAwMDAsInJlYWQiOjMwMDAwMDAwMDAwMCwidXBkYXRlIjoxODAwMDAwMDAwMDAwfX0=",
          "dependencies": [
            "azurerm_resource_group.rg",
            "azurerm_virtual_network.vnet"
          ]
        }
      ]
    },
    {
      "mode": "managed",
      "type": "azurerm_virtual_network_peering",
      "name": "nonprod_spoke_to_hub_peer",
      "provider": "provider[\"registry.terraform.io/hashicorp/azurerm\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "allow_forwarded_traffic": true,
            "allow_gateway_transit": false,
            "allow_virtual_network_access": true,
            "id": "/subscriptions/b2375b5f-8dab-4436-b87c-32bc7fdce5d0/resourceGroups/test-network-rg/providers/Microsoft.Network/virtualNetworks/nonprod-spoke-vnet/virtualNetworkPeerings/nonprod_spoke_to_hub_peer",
            "name": "nonprod_spoke_to_hub_peer",
            "remote_virtual_network_id": "/subscriptions/b2375b5f-8dab-4436-b87c-32bc7fdce5d0/resourceGroups/test-network-rg/providers/Microsoft.Network/virtualNetworks/hub-vnet",
            "resource_group_name": "test-network-rg",
            "timeouts": null,
            "use_remote_gateways": false,
            "virtual_network_name": "nonprod-spoke-vnet"
          },
          "sensitive_attributes": [],
          "private": "eyJlMmJmYjczMC1lY2FhLTExZTYtOGY4OC0zNDM2M2JjN2M0YzAiOnsiY3JlYXRlIjoxODAwMDAwMDAwMDAwLCJkZWxldGUiOjE4MDAwMDAwMDAwMDAsInJlYWQiOjMwMDAwMDAwMDAwMCwidXBkYXRlIjoxODAwMDAwMDAwMDAwfX0=",
          "dependencies": [
            "azurerm_resource_group.rg",
            "azurerm_virtual_network.vnet"
          ]
        }
      ]
    },
    {
      "mode": "managed",
      "type": "azurerm_virtual_network_peering",
      "name": "prod_spoke_to_hub_peer",
      "provider": "provider[\"registry.terraform.io/hashicorp/azurerm\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "allow_forwarded_traffic": true,
            "allow_gateway_transit": false,
            "allow_virtual_network_access": true,
            "id": "/subscriptions/b2375b5f-8dab-4436-b87c-32bc7fdce5d0/resourceGroups/test-network-rg/providers/Microsoft.Network/virtualNetworks/prod-spoke-vnet/virtualNetworkPeerings/prod_spoke_to_hub_peer",
            "name": "prod_spoke_to_hub_peer",
            "remote_virtual_network_id": "/subscriptions/b2375b5f-8dab-4436-b87c-32bc7fdce5d0/resourceGroups/test-network-rg/providers/Microsoft.Network/virtualNetworks/hub-vnet",
            "resource_group_name": "test-network-rg",
            "timeouts": null,
            "use_remote_gateways": false,
            "virtual_network_name": "prod-spoke-vnet"
          },
          "sensitive_attributes": [],
          "private": "eyJlMmJmYjczMC1lY2FhLTExZTYtOGY4OC0zNDM2M2JjN2M0YzAiOnsiY3JlYXRlIjoxODAwMDAwMDAwMDAwLCJkZWxldGUiOjE4MDAwMDAwMDAwMDAsInJlYWQiOjMwMDAwMDAwMDAwMCwidXBkYXRlIjoxODAwMDAwMDAwMDAwfX0=",
          "dependencies": [
            "azurerm_resource_group.rg",
            "azurerm_virtual_network.vnet"
          ]
        }
      ]
    },
    {
      "mode": "managed",
      "type": "random_id",
      "name": "laws",
      "provider": "provider[\"registry.terraform.io/hashicorp/random\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "b64_std": "rlL0kg==",
            "b64_url": "rlL0kg",
            "byte_length": 4,
            "dec": "2924672146",
            "hex": "ae52f492",
            "id": "rlL0kg",
            "keepers": null,
            "prefix": null
          },
          "sensitive_attributes": []
        }
      ]
    }
  ],
  "check_results": null
}
